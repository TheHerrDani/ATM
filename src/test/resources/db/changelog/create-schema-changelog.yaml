databaseChangeLog:
  - changeSet:
      id: drop-if-exist-account
      author: Daniel Sipos
      preConditions:
          - tableExists:
              tableName: account
      changes:
        - dropTable:
            cascadeConstraints: true
            tableName: account
  - changeSet:
      id: drop-if-exist-account-deatils
      author: Daniel Sipos
      preConditions:
        - tableExists:
            tableName: account_details
      changes:
        - dropTable:
            cascadeConstraints: true
            tableName: account_details
  - changeSet:
      id: drop-if-exist-atm
      author: Daniel Sipos
      preConditions:
        - tableExists:
            tableName: atm
      changes:
        - dropTable:
            cascadeConstraints: true
            tableName: atm
  - changeSet:
      id: create-1
      author: Daniel Sipos
      changes:
        - createTable:
            tableName: account
            columns:
              - column:
                  name: id
                  type: bigint
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: account_details
                  type: bigint
              - column:
                  name: account_number
                  type: bigint
              - column:
                  name: pin
                  type: int
        - createTable:
            tableName: account_details
            columns:
              - column:
                  name: id
                  type: bigint
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: actual_balance
                  type: decimal
              - column:
                  name: overdraft
                  type: decimal
        - createTable:
            tableName: atm
            columns:
              - column:
                  name: id
                  type: bigint
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: euro_fifty_count
                  type: bigint
              - column:
                  name: euro_twenty_count
                  type: bigint
              - column:
                  name: euro_ten_count
                  type: bigint
              - column:
                  name: euro_five_count
                  type: bigint
        - addForeignKeyConstraint:
            baseTableName: account
            baseColumnNames: account_details
            constraintName: fk_account_account_details
            referencedTableName: account_details
            referencedColumnNames: id
